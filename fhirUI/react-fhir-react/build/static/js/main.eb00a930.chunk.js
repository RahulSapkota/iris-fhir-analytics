(this["webpackJsonpreact-tutorial"]=this["webpackJsonpreact-tutorial"]||[]).push([[0],{44:function(e,t,r){e.exports=r(57)},51:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var a=r(17),n=r(18),o=r(23),s=r(22),c=r(37),i=r(0),u=r.n(i),l=r(14),h=r.n(l),p=r(78),f=r(73),d=r(75),m=r(81),b=r(79),v=r(76),y=r(77),g=r(74),w=r(24),S=r(29),E=r.n(S),j=r(33),C=r.n(j),O=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={resourcesChartData:null,error:null},n}return Object(n.a)(r,[{key:"componentWillMount",value:function(){this.getChartData()}},{key:"groupBy",value:function(e,t,r){var a=e.reduce((function(e,a){var n=t(a),o=r(a);return e.hasOwnProperty(n)||(e[n]={key:n,label:o,count:0}),e[n].count++,e}),{});return Object.keys(a).map((function(e){return a[e]}))}},{key:"validateSource",value:function(e,t){return!!e.length&&(!!e[0].hasOwnProperty(t)||(this.setState({error:"There isn't chart available for ".concat(e[0].resourceType," resource.")}),!1))}},{key:"getChartData",value:function(){var e=this.state.resourcesChartData;if(!e){var t=this.props.fhirResources;if(this.validateSource(t,"code")){var r=this.groupBy(t,(function(e){return e.code.coding[0].code}),(function(e){return e.code.coding[0].display})).sort((function(e,t){return e.label<t.label?-1:e.label===t.label?0:1})).sort((function(e,t){return t.count-e.count}));e={chart:{type:"column"},title:{text:"Patient's ".concat(t[0].resourceType," history")},xAxis:{categories:r.map((function(e){return e.label}))},yAxis:{min:0},legend:{reversed:!1},plotOptions:{},series:[{name:"Count",data:r.map((function(e){return e.count}))}]},this.setState({resourcesChartData:e})}}}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.state.error?u.a.createElement("div",null,this.state.error):u.a.createElement(C.a,{highcharts:E.a,options:this.state.resourcesChartData}))}}]),r}(u.a.Component),k=(r(51),r(52),r(53),window.location.search.substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{}));function D(e){var t=e.children,r=e.value,a=e.index,n=Object(c.a)(e,["children","value","index"]);return u.a.createElement("div",Object.assign({role:"tabpanel",hidden:r!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},n),r===a&&u.a.createElement(p.a,{p:3},u.a.createElement(f.a,null,t)))}Object(g.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var T=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={},n}return Object(n.a)(r,[{key:"getDetailsHandler",value:function(){this.setState({isShowDetails:!this.state.isShowDetails})}},{key:"render",value:function(){return u.a.createElement("div",{className:"App"},x.length?x.map((function(e){return u.a.createElement(R,{resource:e})})):u.a.createElement("span",null,"No data"))}}]),r}(u.a.Component),R=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={tabValue:0,isShowDetails:!1,isShowChart:!1,resourceTypes:[],resources:{}},n}return Object(n.a)(r,[{key:"getDetailsHandler",value:function(){var e=this;this.props.resource&&this.props.resource.id&&(this.state.isShowDetails?this.setState({isShowDetails:!1}):fetch("http://localhost:32783/fhir/r4/Patient/".concat(this.props.resource.id,"/$everything"),{headers:{accept:"application/fhir+json","accept-language":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7,es;q=0.6","cache-control":"no-cache","content-type":"application/fhir+json;charset=UTF-8",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-requested-with":"XMLHttpRequest"},referrer:"http://localhost:32783/csp/user/fhirUI/FHIRAppDemo.html",referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){var r=t.entry.map((function(e){return e.resource})).reduce((function(e,t){return e.hasOwnProperty(t.resourceType)||(e[t.resourceType]=[]),e[t.resourceType].push(t),e}),{});delete r.Patient,e.setState({isShowDetails:!e.state.isShowDetails}),e.setState({resourceTypes:Object.keys(r).sort()}),e.setState({resources:r}),e.handleChangeTab({},0)})))}},{key:"handleChangeTab",value:function(e,t){var r=this;Promise.resolve().then((function(){r.setState({tabValue:t})}))}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(w.FhirResource,{fhirResource:this.props.resource,fhirVersion:w.fhirVersions.R4,thorough:!0}),u.a.createElement(d.a,{onClick:function(){return e.getDetailsHandler()}},this.state.isShowDetails?"Less":"More"),this.state.isShowDetails?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{position:"static"},u.a.createElement(b.a,{value:this.state.tabValue,onChange:function(t,r){return e.handleChangeTab(t,r)},"aria-label":"simple tabs example",variant:"scrollable",scrollButtons:"auto"},this.state.resourceTypes.map((function(e,t){return u.a.createElement(v.a,Object.assign({label:e},{id:"simple-tab-".concat(r=t),"aria-controls":"simple-tabpanel-".concat(r)}));var r})))),this.state.resourceTypes.map((function(t,r){var a=e.state.resources[t]||[];return u.a.createElement(D,{value:e.state.tabValue,index:r},u.a.createElement(d.a,{onClick:function(){return e.setState({isShowChart:!e.state.isShowChart})}},e.state.isShowChart?"Chart":"Rows"),e.state.isShowChart?u.a.createElement(O,{fhirResources:a}):a.map((function(e){return u.a.createElement(w.FhirResource,{fhirResource:e,fhirVersion:w.fhirVersions.R4,thorough:!0})})))}))):null,u.a.createElement(y.a,null))}}]),r}(u.a.Component),x=[];(function(e){if(!e)return Promise.resolve([]);var t="http://localhost:32783/fhir/r4/Patient?_id=".concat(e);return fetch(t,{headers:{accept:"application/fhir+json","cache-control":"no-cache","content-type":"application/fhir+json;charset=UTF-8",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","x-requested-with":"XMLHttpRequest"},referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors",credentials:"include"}).then((function(e){return e.json()}))})(k.PatientList).then((function(e){x=e&&e.entry?e.entry.map((function(e){return e.resource})):[],h.a.render(u.a.createElement(T,null),document.getElementById("root"))}))}},[[44,1,2]]]);
//# sourceMappingURL=main.eb00a930.chunk.js.map